<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<title>EnglishQuest ğŸ‰</title>
<link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@400;700&family=Cinzel:wght@400;600;700&family=Spectral:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
<style>
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
:root{
  --void:#030208;--deep:#0d0819;--panel:rgba(18,11,36,.97);
  --gold:#dba84a;--gold2:#f2cf80;--goldD:#7a5518;
  --ember:#c24510;--ember2:#ff6933;
  --blood:#7a1515;--bloodL:#c03030;
  --teal:#17a890;--tealL:#22d9bc;
  --sage:#328060;--sageL:#50ab7d;
  --violet:#5c228a;
  --text:#cdbfa5;--textD:#6a5c44;
  --T:'Cinzel Decorative',cursive;--S:'Cinzel',serif;--B:'Spectral',serif;
}
html,body{background:var(--void);font-family:var(--B);color:var(--text);min-height:100vh;overflow-x:hidden}
::-webkit-scrollbar{width:5px}::-webkit-scrollbar-track{background:var(--deep)}::-webkit-scrollbar-thumb{background:var(--goldD);border-radius:3px}
#cosmos{position:fixed;inset:0;z-index:0;pointer-events:none;
  background:radial-gradient(ellipse 90% 70% at 10% -10%,rgba(92,34,138,.2) 0%,transparent 50%),
             radial-gradient(ellipse 70% 55% at 90% 110%,rgba(194,69,16,.13) 0%,transparent 50%)}
#cosmos::after{content:'';position:absolute;inset:0;
  background-image:
    radial-gradient(1.5px 1.5px at 7% 8%,rgba(219,168,74,.9) 0%,transparent 1.5px),
    radial-gradient(1px 1px at 22% 4%,rgba(255,255,255,.7) 0%,transparent 1px),
    radial-gradient(2px 2px at 63% 6%,rgba(255,255,255,.8) 0%,transparent 2px),
    radial-gradient(1.5px 1.5px at 88% 3%,rgba(255,255,255,.6) 0%,transparent 1.5px),
    radial-gradient(2px 2px at 73% 35%,rgba(255,255,255,.5) 0%,transparent 2px),
    radial-gradient(1.5px 1.5px at 4% 68%,rgba(219,168,74,.55) 0%,transparent 1.5px)}
#app{position:relative;z-index:1;min-height:100vh}
.screen{display:none}.screen.active{display:block}

/* NAV */
nav{position:sticky;top:0;z-index:200;height:58px;padding:0 20px;
  display:flex;align-items:center;justify-content:space-between;
  background:rgba(3,2,8,.93);border-bottom:1px solid rgba(219,168,74,.15);backdrop-filter:blur(14px)}
.logo{font-family:var(--T);font-size:19px;color:var(--gold);cursor:pointer;letter-spacing:1px}
.logo em{color:var(--ember2);font-style:normal}
.nav-btns{display:flex;gap:4px}
.nb{padding:6px 14px;border:1px solid transparent;border-radius:5px;
  background:transparent;color:var(--textD);font-family:var(--S);font-size:12px;cursor:pointer;transition:all .22s}
.nb:hover,.nb.on{color:var(--gold);border-color:rgba(219,168,74,.4);background:rgba(219,168,74,.08)}
.nb.adm:hover,.nb.adm.on{color:var(--tealL);border-color:rgba(23,168,144,.4);background:rgba(23,168,144,.07)}
.nav-r{display:flex;align-items:center;gap:10px}
.nav-pts{font-family:var(--S);font-size:14px;color:var(--gold)}
.nav-av{width:34px;height:34px;border-radius:50%;border:2px solid var(--goldD);display:grid;place-items:center;font-size:17px}
.profile-badge{padding:4px 12px;border-radius:20px;font-family:var(--S);font-size:11px;border:1px solid}

/* PANELS */
.pnl{background:linear-gradient(150deg,var(--panel),rgba(7,4,15,.98));
  border:1px solid rgba(219,168,74,.13);border-radius:14px;padding:20px}
.pnl-t{font-family:var(--S);font-size:11px;font-weight:700;letter-spacing:2px;
  text-transform:uppercase;color:var(--goldD);margin-bottom:16px;
  padding-bottom:9px;border-bottom:1px solid rgba(219,168,74,.1)}
.pnl-t.tl{color:var(--teal);border-bottom-color:rgba(23,168,144,.13)}
.divL{height:1px;background:rgba(219,168,74,.09);margin:13px 0}

/* BARS */
.bw{margin-bottom:3px}
.bl{display:flex;justify-content:space-between;font-family:var(--S);font-size:10px;color:var(--textD);margin-bottom:4px}
.bt{height:7px;background:rgba(255,255,255,.07);border-radius:4px;overflow:hidden}
.bf{height:100%;border-radius:4px;transition:width .6s}
.hp{background:linear-gradient(90deg,var(--blood),var(--ember2))}
.xp{background:linear-gradient(90deg,var(--sage),var(--sageL))}
.prg{background:linear-gradient(90deg,var(--violet),var(--gold))}
.nmy{background:linear-gradient(90deg,var(--violet),#d850f0)}

/* BUTTONS */
.bgold{padding:12px 32px;background:linear-gradient(135deg,var(--goldD),var(--gold));
  border:none;border-radius:6px;color:var(--void);font-family:var(--T);font-size:14px;
  cursor:pointer;transition:all .28s;box-shadow:0 5px 22px rgba(219,168,74,.25)}
.bgold:hover:not(:disabled){transform:translateY(-2px)}
.bgold:disabled{opacity:.35;cursor:not-allowed}
.bemb{padding:12px 28px;background:linear-gradient(135deg,var(--blood),var(--ember));
  border:none;border-radius:6px;color:#fff;font-family:var(--T);font-size:13px;cursor:pointer;transition:all .28s}
.bemb:hover{transform:translateY(-2px)}
.bteal{padding:12px 28px;background:linear-gradient(135deg,#0d6e5d,var(--teal));
  border:none;border-radius:6px;color:var(--void);font-family:var(--T);font-size:13px;cursor:pointer;transition:all .28s}
.bteal:hover{transform:translateY(-2px)}

/* â•â• PROFILE SELECT â•â• */
#s-profiles{min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:32px}
.drag{font-size:96px;margin-bottom:26px;filter:drop-shadow(0 0 40px rgba(194,69,16,.75));animation:dragF 3.8s ease-in-out infinite}
@keyframes dragF{0%,100%{transform:translateY(0)}50%{transform:translateY(-16px)}}
.login-T{font-family:var(--T);font-size:clamp(36px,7vw,70px);color:var(--gold);text-align:center;margin-bottom:8px;text-shadow:0 0 50px rgba(219,168,74,.5)}
.login-T em{color:var(--ember2);font-style:normal}
.login-sub{font-family:var(--S);font-size:12px;letter-spacing:4px;color:var(--textD);text-transform:uppercase;text-align:center;margin-bottom:48px}
.profiles-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:20px;width:100%;max-width:760px;margin-bottom:32px}
.profile-card{background:linear-gradient(145deg,rgba(19,12,38,.95),rgba(7,4,15,.98));
  border:2px solid rgba(219,168,74,.15);border-radius:18px;padding:32px 24px;
  text-align:center;cursor:pointer;transition:all .35s;position:relative;overflow:hidden}
.profile-card::before{content:'';position:absolute;inset:0;opacity:0;transition:opacity .35s}
.profile-card:hover{transform:translateY(-6px);border-color:rgba(219,168,74,.5)}
.profile-card:hover::before{opacity:1}
.profile-card.yoav::before{background:radial-gradient(ellipse at 50% 0%,rgba(219,168,74,.07) 0%,transparent 70%)}
.profile-card.omer::before{background:radial-gradient(ellipse at 50% 0%,rgba(92,34,138,.1) 0%,transparent 70%)}
.profile-card.noa::before{background:radial-gradient(ellipse at 50% 0%,rgba(23,168,144,.08) 0%,transparent 70%)}
.pc-emoji{font-size:70px;display:block;margin-bottom:14px;transition:transform .35s}
.profile-card:hover .pc-emoji{transform:scale(1.1)}
.pc-name{font-family:var(--T);font-size:22px;margin-bottom:5px}
.profile-card.yoav .pc-name{color:var(--gold)}
.profile-card.omer .pc-name{color:var(--violetL, #8b4fd0)}
.profile-card.noa .pc-name{color:var(--tealL)}
.pc-level{font-family:var(--S);font-size:10px;color:var(--textD);letter-spacing:2px;text-transform:uppercase;margin-bottom:14px}
.pc-topics{display:flex;flex-wrap:wrap;gap:5px;justify-content:center}
.pc-tag{padding:3px 9px;border-radius:3px;font-size:10px;font-family:var(--S);letter-spacing:.5px}

/* â•â• CHAR SELECT â•â• */
#s-char{padding:36px 28px;max-width:1060px;margin:0 auto}
.pgT{font-family:var(--T);font-size:32px;color:var(--gold);text-align:center;margin-bottom:7px}
.pgS{font-family:var(--S);font-size:12px;letter-spacing:3px;color:var(--textD);text-transform:uppercase;text-align:center;margin-bottom:42px}
.cgrid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:20px;margin-bottom:36px}
.cc{background:linear-gradient(160deg,rgba(19,12,38,.92),rgba(7,4,15,.96));
  border:2px solid rgba(219,168,74,.11);border-radius:14px;padding:28px 20px;
  text-align:center;cursor:pointer;transition:all .38s;position:relative}
.cc:hover{border-color:rgba(219,168,74,.42);transform:translateY(-5px)}
.cc.sel{border-color:var(--gold);box-shadow:0 0 0 3px rgba(219,168,74,.14)}
.cc-badge{position:absolute;top:10px;left:10px;background:var(--gold);color:var(--void);font-family:var(--S);font-size:9px;font-weight:700;padding:2px 8px;border-radius:3px}
.cc-icon{font-size:66px;display:block;margin-bottom:12px;transition:transform .38s}
.cc:hover .cc-icon{transform:scale(1.08)}
.cc-name{font-family:var(--T);font-size:19px;color:var(--gold);margin-bottom:3px}
.cc-cls{font-family:var(--S);font-size:10px;color:var(--ember2);letter-spacing:2px;text-transform:uppercase;margin-bottom:12px}
.cc-desc{color:var(--textD);font-size:13px;line-height:1.5;font-style:italic;margin-bottom:16px}
.cc-stats{display:flex;flex-direction:column;gap:5px}
.csr{display:flex;align-items:center;gap:7px}
.csl{font-family:var(--S);font-size:9px;color:var(--textD);width:48px;text-align:right}
.csb{flex:1;height:3px;background:rgba(255,255,255,.08);border-radius:2px;overflow:hidden}
.csf{height:100%;border-radius:2px}

/* â•â• GAME â•â• */
#s-game{padding:20px 24px;max-width:1260px;margin:0 auto}
.glay{display:grid;grid-template-columns:240px 1fr 240px;gap:18px;align-items:start}
.hero-c{text-align:center;margin-bottom:18px}
.hero-ic{font-size:62px;display:block;margin-bottom:8px;animation:hGlow 3s ease-in-out infinite}
@keyframes hGlow{0%,100%{filter:drop-shadow(0 0 18px rgba(219,168,74,.4))}50%{filter:drop-shadow(0 0 28px rgba(219,168,74,.68))}}
.hero-n{font-family:var(--T);color:var(--gold);font-size:18px}
.hero-k{font-family:var(--S);font-size:10px;color:var(--ember2);letter-spacing:2px}
.kv{display:flex;justify-content:space-between;align-items:center;margin-bottom:9px;font-family:var(--S);font-size:12px}
.kvk{color:var(--textD)}.kvv{color:var(--gold)}
.arena{background:linear-gradient(170deg,rgba(19,12,38,.96),rgba(3,2,8,.99));
  border:1px solid rgba(219,168,74,.16);border-radius:14px;padding:28px 24px;
  display:flex;flex-direction:column;align-items:center;position:relative;overflow:hidden}
.arena::before{content:'';position:absolute;inset:0;pointer-events:none;
  background:radial-gradient(ellipse 75% 45% at 50% 25%,rgba(194,69,16,.05) 0%,transparent 65%)}
.arT{font-family:var(--T);font-size:20px;color:var(--gold);letter-spacing:2px;margin-bottom:5px}
.arM{font-family:var(--S);font-size:10px;color:var(--ember2);letter-spacing:3px;text-transform:uppercase;margin-bottom:24px}
.fts{display:flex;align-items:center;justify-content:center;gap:28px;margin-bottom:24px;width:100%}
.ft{display:flex;flex-direction:column;align-items:center;gap:7px;flex:1;max-width:180px}
.ftic{font-size:80px;animation:fE 2.2s ease-in-out infinite;filter:drop-shadow(0 0 18px rgba(194,69,16,.5))}
.ftic.pl{animation:fP 2.8s ease-in-out infinite;filter:drop-shadow(0 0 18px rgba(219,168,74,.45))}
@keyframes fE{0%,100%{transform:translateY(0) rotate(-3deg)}50%{transform:translateY(-9px) rotate(3deg)}}
@keyframes fP{0%,100%{transform:translateY(0) rotate(1.5deg)}50%{transform:translateY(-6px) rotate(-1.5deg)}}
.ftnm{font-family:var(--S);color:var(--text);font-size:12px;font-weight:700}
.ftbr{width:128px}
.vs{font-family:var(--T);font-size:30px;color:var(--ember2);text-shadow:0 0 18px var(--ember);flex-shrink:0}
.blog{background:rgba(0,0,0,.42);border:1px solid rgba(219,168,74,.09);border-radius:10px;padding:14px 18px;width:100%;margin-bottom:20px;min-height:68px}
.blogt{font-size:14px;line-height:1.65;color:var(--text);font-style:italic}
.blogt .g{color:var(--gold);font-style:normal}.blogt .f{color:var(--ember2);font-style:normal}.blogt .gr{color:var(--sageL);font-style:normal}
.abtns{display:flex;gap:12px;margin-bottom:20px;flex-wrap:wrap;justify-content:center}
.prgsec{width:100%}
.prgl{display:flex;justify-content:space-between;font-family:var(--S);font-size:10px;color:var(--textD);margin-bottom:7px}
.prgnodes{display:flex;justify-content:space-between;margin-top:9px}
.pnode{width:16px;height:16px;border-radius:50%;border:2px solid rgba(219,168,74,.18);background:var(--void);display:grid;place-items:center;font-size:8px;transition:all .4s}
.pnode.done{border-color:var(--gold);background:var(--goldD);color:var(--void)}
.pnode.now{border-color:var(--ember2);animation:pls 1.2s infinite}
@keyframes pls{0%,100%{box-shadow:0 0 10px var(--ember)}50%{box-shadow:0 0 20px var(--ember2)}}
.qo{display:flex;align-items:flex-start;gap:8px;margin-bottom:11px}
.qo-ck{font-size:15px;flex-shrink:0}.qo-tx{font-size:12px;line-height:1.45}
.qo-tx.done{color:var(--sageL)}.qo-tx.pend{color:var(--textD)}

/* â•â• MODAL â•â• */
.overlay{position:fixed;inset:0;background:rgba(0,0,0,.9);z-index:600;display:none;align-items:center;justify-content:center;padding:18px;backdrop-filter:blur(12px)}
.overlay.open{display:flex}
.modal{background:linear-gradient(145deg,rgba(19,12,38,.99),rgba(7,4,15,.99));
  border:1px solid rgba(219,168,74,.26);border-radius:20px;padding:36px 40px;
  width:100%;max-width:720px;max-height:92vh;overflow-y:auto}
.mhead{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:22px}
.mtype{font-family:var(--S);font-size:11px;letter-spacing:3px;text-transform:uppercase;color:var(--ember2)}
.mmeta{font-family:var(--S);font-size:11px;color:var(--textD);margin-top:3px}
.mclose{width:30px;height:30px;border:1px solid rgba(219,168,74,.22);border-radius:5px;background:transparent;color:var(--textD);cursor:pointer;font-size:15px}
.mclose:hover{border-color:var(--gold);color:var(--gold)}

/* PASSAGE */
.passage{background:rgba(0,0,0,.32);border:1px solid rgba(219,168,74,.1);border-radius:10px;padding:20px 22px;margin-bottom:22px}
.pasT{font-family:var(--T);color:var(--gold);font-size:17px;margin-bottom:10px}
.pasTx{font-size:15px;line-height:1.85;direction:ltr;text-align:left}

/* QUESTION */
.exQ{font-size:18px;color:var(--text);line-height:1.5;margin-bottom:22px;font-style:italic}
.exQ strong{color:var(--gold2);font-style:normal}
.qtype-label{font-family:var(--S);font-size:10px;letter-spacing:2px;color:var(--teal);text-transform:uppercase;margin-bottom:10px}

/* MC OPTIONS */
.opts{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:18px}
.opt{padding:14px 17px;background:rgba(255,255,255,.03);border:1px solid rgba(255,255,255,.11);
  border-radius:10px;color:var(--text);font-size:14px;cursor:pointer;
  transition:all .28s;font-family:var(--B);text-align:right;width:100%;direction:ltr;text-align:left}
.opt:hover:not([disabled]){background:rgba(219,168,74,.07);border-color:rgba(219,168,74,.42);color:var(--gold)}
.opt.cor{background:rgba(50,128,96,.17)!important;border-color:var(--sageL)!important;color:var(--sageL)!important}
.opt.wrg{background:rgba(122,21,21,.17)!important;border-color:var(--bloodL)!important;color:var(--bloodL)!important}

/* TRUE/FALSE */
.tf-opts{display:flex;gap:12px;margin-bottom:18px;justify-content:center}
.tf-btn{padding:16px 40px;border-radius:10px;font-family:var(--T);font-size:16px;cursor:pointer;transition:all .28s;border:2px solid}
.tf-btn.true-btn{border-color:rgba(50,128,96,.4);background:rgba(50,128,96,.08);color:var(--sageL)}
.tf-btn.false-btn{border-color:rgba(122,21,21,.4);background:rgba(122,21,21,.08);color:var(--bloodL)}
.tf-btn:hover:not([disabled]){transform:translateY(-2px);filter:brightness(1.2)}
.tf-btn.cor{background:rgba(50,128,96,.25)!important;border-color:var(--sageL)!important}
.tf-btn.wrg{background:rgba(122,21,21,.25)!important;border-color:var(--bloodL)!important}

/* WORD DRAG */
.drag-area{margin-bottom:18px}
.drag-sentence{min-height:52px;padding:12px 16px;background:rgba(0,0,0,.35);
  border:2px dashed rgba(219,168,74,.3);border-radius:10px;
  display:flex;flex-wrap:wrap;gap:8px;align-items:center;margin-bottom:14px;
  direction:ltr;transition:border-color .2s}
.drag-sentence.drag-over{border-color:var(--gold);background:rgba(219,168,74,.05)}
.drag-sentence-label{font-family:var(--S);font-size:10px;color:var(--textD);letter-spacing:2px;text-transform:uppercase;margin-bottom:6px}
.word-bank{display:flex;flex-wrap:wrap;gap:8px;padding:14px;background:rgba(255,255,255,.03);border:1px solid rgba(255,255,255,.08);border-radius:10px;direction:ltr;min-height:52px}
.word-chip{padding:8px 14px;background:rgba(219,168,74,.1);border:1px solid rgba(219,168,74,.3);
  border-radius:6px;color:var(--gold);font-size:14px;cursor:grab;font-family:var(--B);
  transition:all .2s;user-select:none;direction:ltr}
.word-chip:hover{background:rgba(219,168,74,.2);transform:translateY(-2px)}
.word-chip.dragging{opacity:.4;transform:scale(0.95)}
.word-chip.placed{background:rgba(23,168,144,.1);border-color:rgba(23,168,144,.4);color:var(--tealL);cursor:grab}
.word-chip.placed:hover{background:rgba(23,168,144,.2)}
.drag-check{margin-top:12px}

/* FEEDBACK */
.fbk{padding:15px 18px;border-radius:10px;margin-bottom:18px;font-size:14px;line-height:1.6}
.fbk.cor{background:rgba(50,128,96,.1);border:1px solid var(--sageL);color:var(--sageL)}
.fbk.wrg{background:rgba(122,21,21,.1);border:1px solid var(--bloodL);color:var(--bloodL)}

/* LOADING */
.ldg{text-align:center;padding:52px 36px}
.ldgic{font-size:68px;animation:spin 4s linear infinite;display:block;margin-bottom:18px}
@keyframes spin{from{transform:rotate(0)}to{transform:rotate(360deg)}}
.ldgT{font-family:var(--T);color:var(--gold);font-size:20px;margin-bottom:10px}
.ldgS{color:var(--textD);font-style:italic;font-size:14px}

/* API BANNER */
.api-banner{background:rgba(219,168,74,.08);border-bottom:1px solid rgba(219,168,74,.2);
  padding:10px 20px;font-family:var(--S);font-size:12px;color:var(--gold);display:flex;align-items:center;gap:10px;flex-wrap:wrap}
.api-input{flex:1;min-width:200px;padding:6px 12px;background:rgba(0,0,0,.4);border:1px solid rgba(219,168,74,.3);border-radius:5px;color:var(--text);font-size:12px;font-family:var(--B)}
.api-save{padding:6px 16px;background:rgba(219,168,74,.15);border:1px solid var(--goldD);border-radius:5px;color:var(--gold);font-family:var(--S);font-size:11px;cursor:pointer}
.api-save:hover{background:rgba(219,168,74,.25)}

/* TOAST */
#toast{position:fixed;top:70px;left:20px;z-index:900;padding:13px 20px;border-radius:10px;
  font-family:var(--S);font-size:13px;max-width:320px;display:none;animation:tIn .3s ease}
@keyframes tIn{from{transform:translateX(-70px);opacity:0}to{transform:translateX(0);opacity:1}}
#toast.gold{background:linear-gradient(135deg,rgba(19,12,38,.99),rgba(7,4,15,.99));border:1px solid var(--gold);color:var(--gold)}
#toast.green{background:linear-gradient(135deg,rgba(19,12,38,.99),rgba(7,4,15,.99));border:1px solid var(--sageL);color:var(--sageL)}
#toast.red{background:linear-gradient(135deg,rgba(19,12,38,.99),rgba(7,4,15,.99));border:1px solid var(--bloodL);color:var(--bloodL)}

@media(max-width:980px){.glay{grid-template-columns:1fr}.opts{grid-template-columns:1fr}}
@media(max-width:620px){
  .cgrid{grid-template-columns:1fr 1fr}
  .modal{padding:20px 16px}
  .profiles-grid{grid-template-columns:1fr}
  .login-T{font-size:38px}
  body{font-size:17px}
  .exQ{font-size:20px!important}
  .opt{font-size:17px!important;padding:16px!important}
  .tf-btn{font-size:18px!important;padding:18px 30px!important}
  .pasT{font-size:18px!important}
  .pasTx{font-size:17px!important;line-height:2!important}
  .word-chip{font-size:17px!important;padding:10px 18px!important}
  .fbk{font-size:16px!important}
  .pc-name{font-size:26px!important}
  .pc-level{font-size:13px!important}
  .arT{font-size:17px!important}
  .blogt{font-size:16px!important}
  nav{height:52px}
  .nb{font-size:13px!important;padding:7px 12px!important}
  .nav-pts{font-size:16px!important}
  .ftic{font-size:56px!important}
  .vs{font-size:24px!important}
  .pnl-t{font-size:12px!important}
  .kv{font-size:14px!important}
  .qtype-label{font-size:13px!important}
  .profile-card{padding:24px 18px}
  .abtns button{font-size:14px!important;padding:14px 18px!important}
}
</style>
</head>
<body>
<div id="cosmos"></div>
<div id="toast"></div>

<div class="overlay" id="overlay">
  <div class="modal">
    <div class="mhead">
      <div><div class="mtype" id="m-type"></div><div class="mmeta" id="m-meta"></div></div>
      <button class="mclose" onclick="closeModal()">âœ•</button>
    </div>
    <div id="m-body"></div>
  </div>
</div>

<div id="app">

<!-- â•â• PROFILE SELECT â•â• -->
<div id="s-profiles" class="screen active">
  <div class="drag">ğŸ‰</div>
  <h1 class="login-T">English<em>Quest</em></h1>
  <p class="login-sub">××™ ××©×—×§ ×¢×›×©×™×•?</p>
  <div class="profiles-grid">
    <div class="profile-card yoav" onclick="selectProfile('yoav')">
      <span class="pc-emoji">ğŸ€</span>
      <div class="pc-name">×™×•××‘</div>
      <div class="pc-level">×¨××” ×‘×™× ×•× ×™×ª-×’×‘×•×”×” Â· ×‘×Ÿ 12</div>
      <div class="pc-topics">
        <span class="pc-tag" style="background:rgba(219,168,74,.12);color:var(--gold);border:1px solid rgba(219,168,74,.25)">×›×“×•×¨×¡×œ</span>
        <span class="pc-tag" style="background:rgba(219,168,74,.12);color:var(--gold);border:1px solid rgba(219,168,74,.25)">×™×–××•×ª</span>
        <span class="pc-tag" style="background:rgba(219,168,74,.12);color:var(--gold);border:1px solid rgba(219,168,74,.25)">×”××¦××•×ª</span>
      </div>
    </div>
    <div class="profile-card omer" onclick="selectProfile('omer')">
      <span class="pc-emoji">ğŸ§™</span>
      <div class="pc-name">×¢×•××¨</div>
      <div class="pc-level">×¨××” ×‘×™× ×•× ×™×ª Â· ×‘×Ÿ 12</div>
      <div class="pc-topics">
        <span class="pc-tag" style="background:rgba(139,79,208,.12);color:#8b4fd0;border:1px solid rgba(139,79,208,.25)">×“×¨×§×•× ×™×</span>
        <span class="pc-tag" style="background:rgba(139,79,208,.12);color:#8b4fd0;border:1px solid rgba(139,79,208,.25)">×”×¨×¤×ª×§××•×ª</span>
        <span class="pc-tag" style="background:rgba(139,79,208,.12);color:#8b4fd0;border:1px solid rgba(139,79,208,.25)">×›×“×•×¨×¢×£</span>
      </div>
    </div>
    <div class="profile-card noa" onclick="selectProfile('noa')">
      <span class="pc-emoji">â­</span>
      <div class="pc-name">× ×•×¢×”</div>
      <div class="pc-level">××ª×—×™×œ×” Â· ×‘×ª 9</div>
      <div class="pc-topics">
        <span class="pc-tag" style="background:rgba(23,168,144,.1);color:var(--tealL);border:1px solid rgba(23,168,144,.25)">×¦×‘×¢×™×</span>
        <span class="pc-tag" style="background:rgba(23,168,144,.1);color:var(--tealL);border:1px solid rgba(23,168,144,.25)">××•×›×œ</span>
        <span class="pc-tag" style="background:rgba(23,168,144,.1);color:var(--tealL);border:1px solid rgba(23,168,144,.25)">×ª×—×‘×•×¨×”</span>
      </div>
    </div>
    <div class="profile-card" onclick="selectProfile('admin')" style="border-color:rgba(23,168,144,.2);grid-column:1/-1">
      <span class="pc-emoji">âš™ï¸</span>
      <div class="pc-name" style="color:var(--tealL);font-size:18px">×××©×§ × ×™×”×•×œ</div>
      <div class="pc-level">×œ××•×¨×” / ×”×•×¨×” ×‘×œ×‘×“</div>
    </div>
  </div>
  <div style="text-align:center">
    <div class="api-banner" style="border-radius:12px;display:none;margin:0 auto">
      <span>ğŸ”‘ API Key:</span>
      <input class="api-input" id="api-key-input" type="password" placeholder="sk-ant-api03-..." style="min-width:260px">
      <button class="api-save" onclick="saveApiKey()">×©××•×¨</button>
      <span id="api-status" style="font-size:11px;color:var(--sageL)"></span>
    </div>
  </div>
</div>

<!-- â•â• CHAR SELECT â•â• -->
<div id="s-char" class="screen">
  <nav><div class="logo">English<em>Quest</em></div><div></div>
    <div id="profile-nav-badge"></div>
  </nav>
  <div style="padding:36px 28px;max-width:1060px;margin:0 auto">
    <h1 class="pgT">×‘×—×¨/×™ ××ª ×”×’×™×‘×•×¨/×” ×©×œ×š</h1>
    <p class="pgS">×”×“××•×ª ×©×ª×œ×—× ×‘×“×¨×§×•× ×™× ×‘×©××š</p>
    <div class="cgrid" id="chars-grid"></div>
    <div style="text-align:center"><button class="bgold" id="start-btn" disabled onclick="doStart()">×›× ×¡/×™ ×œ×××œ×›×” â†’</button></div>
  </div>
</div>

<!-- â•â• GAME â•â• -->
<div id="s-game" class="screen">
  <nav>
    <div class="logo" onclick="goTo('game')">English<em>Quest</em></div>
    <div class="nav-btns">
      <button class="nb on" onclick="goTo('game')">âš”ï¸ ××¡×¢</button>
      <button class="nb" onclick="goTo('profiles')">ğŸ‘¤ ×”×—×œ×£</button>
    </div>
    <div class="nav-r">
      <div class="nav-pts" id="nav-pts">â­ 0</div>
      <div class="nav-av" id="nav-av">ğŸ§™</div>
    </div>
  </nav>
  <div style="padding:20px 24px;max-width:1260px;margin:0 auto">
    <div class="glay">
      <div class="pnl" id="player-panel"></div>
      <div class="arena" id="arena-panel"></div>
      <div class="pnl" id="quest-panel"></div>
    </div>
  </div>
</div>

</div><!-- end app -->

<script>
// Load saved API key on startup
window.addEventListener('DOMContentLoaded', ()=>{
  const saved=localStorage.getItem("eq_api_key");
  if(saved){
    G.apiKey=saved;
    const inp=document.getElementById("api-key-input");
    if(inp){inp.value=saved;document.getElementById("api-status").textContent="âœ… ×©××•×¨";}
  }
});

/* â•â•â•â•â•â•â•â•â•â•â• PROFILES â•â•â•â•â•â•â•â•â•â•â• */
const PROFILES = {
  yoav: {
    name: "×™×•××‘", emoji: "ğŸ€", color: "#dba84a",
    level: "intermediate-high", age: 12,
    topics: ["basketball","entrepreneurship","inventions and inventors","technology","science"],
    grammar: ["Present Simple","Present Continuous","Yes/No questions","WH questions (What/Where/Who/When)"],
    vocab: ["about", "afraid", "anything", "arrive", "catch a train", "clever", "comfortable", "cost", "Dear", "decide", "directly", "famous", "get off", "get on", "glad", "hit", "island", "leave", "love", "million", "mountain", "nature", "order", "pick", "popular", "reason", "return", "saw", "several", "still", "take something away", "take something off", "take a picture", "take a train", "Take care", "team", "the cold", "thousand", "visitor", "welcome", "a while", "against", "all the time", "almost", "believe", "both", "collect", "come home", "competition", "could", "date", "excellent", "feel well", "full", "get better", "get the flu", "if", "instead", "invite", "keep", "kiss", "make a mistake", "mean", "medical", "message", "miss", "much", "nurse", "only", "perfect", "pocket", "really", "see", "should", "so", "sorry", "tasty", "tell a story"],
    passageStyle: "engaging story or article about basketball players, famous inventors, or startup founders",
    openQuestions: true,
    enemies: [
      {name:"Shadow Defender",emoji:"ğŸ›¡ï¸",map:"The Invention Arena"},
      {name:"The Dark Coach",emoji:"ğŸ€",map:"Startup Dungeon"},
    ]
  },
  omer: {
    name: "×¢×•××¨", emoji: "ğŸ§™", color: "#8b4fd0",
    level: "intermediate", age: 12,
    topics: ["dungeons and dragons","magic","adventures and quests","riddles","volleyball"],
    grammar: ["Present Simple","Present Continuous","Yes/No questions","WH questions"],
    vocab: ["about", "afraid", "anything", "arrive", "catch a train", "clever", "comfortable", "cost", "Dear", "decide", "directly", "famous", "get off", "get on", "glad", "hit", "island", "leave", "love", "million", "mountain", "nature", "order", "pick", "popular", "reason", "return", "saw", "several", "still", "take something away", "take something off", "take a picture", "take a train", "Take care", "team", "the cold", "thousand", "visitor", "welcome", "a while", "against", "all the time", "almost", "believe", "both", "collect", "come home", "competition", "could", "date", "excellent", "feel well", "full", "get better", "get the flu", "if", "instead", "invite", "keep", "kiss", "make a mistake", "mean", "medical", "message", "miss", "much", "nurse", "only", "perfect", "pocket", "really", "see", "should", "so", "sorry", "tasty", "tell a story"],
    passageStyle: "fantasy adventure story with dragons, wizards, or volleyball heroes",
    openQuestions: true,
    enemies: [
      {name:"The Dark Dragon",emoji:"ğŸ‰",map:"Dragon's Dungeon"},
      {name:"Shadow Wizard",emoji:"ğŸ”®",map:"Enchanted Labyrinth"},
    ]
  },
  noa: {
    name: "× ×•×¢×”", emoji: "â­", color: "#22d9bc",
    level: "beginner", age: 9,
    topics: ["colors","food","transport","animals","school"],
    grammar: ["Reading simple sentences","True/False","Multiple choice"],
    vocab: ["one", "two", "three", "four", "five", "six", "seven", "eight", "nine", "ten", "a", "an", "afraid", "apple", "baby", "ball", "banana", "best", "black", "blue", "book", "brother", "brown", "cake", "can", "chair", "classroom", "crayons", "down", "eyes", "family", "fast", "fat", "father", "feel", "find", "from", "girl", "glue", "good", "grandfather", "grandmother", "gray", "green", "happy", "have", "help", "his", "house", "igloo", "in", "it", "jacket", "jump", "last", "lemon", "like", "listen", "look", "many", "mat", "monkey", "morning", "mother", "my", "name", "near", "on", "open", "orange", "pan", "paper", "pink", "pizza", "play", "please", "pupil", "purple", "queen", "quiet", "read", "right", "scarf", "school", "scissors", "see", "she", "show", "sister", "small", "snake", "stop", "surprised", "tall", "teacher", "television", "the", "there", "this", "to", "tree", "umbrella", "under", "vet", "wet", "white", "window", "woman", "yellow", "zoo", "birthday", "bread", "breakfast", "bring", "carrot", "cheese", "chicken", "children", "chips", "chocolate", "coffee", "come", "cookie", "day", "dinner", "drink", "eat", "eighteen", "eleven", "favorite", "fifteen", "fish", "food", "for", "fourteen", "Friday", "fruit", "hungry", "jam", "juice", "kitchen", "letter", "lunch", "make", "meat", "milkshake", "Monday", "mouth", "need", "nineteen", "onion", "party", "peppers", "restaurant", "salad", "sandwich", "Saturday", "seventeen", "share", "shop", "short", "sixteen", "spinach", "start", "Sunday", "table", "tea", "teeth", "thirsty", "thirteen", "Thursday", "time", "today", "tomato", "tomorrow", "Tuesday", "twelve", "twenty", "vegetable", "want", "wash", "water", "we", "week", "Wednesday", "yesterday", "again", "bake", "bathroom", "bedroom", "boots", "buy", "clean", "close", "closet", "clothes", "coat", "cold", "color", "dollar", "door", "dress", "eighty", "face", "fifty", "flute", "forty", "game", "home", "hundred", "late", "living room", "long", "mirror", "more", "new", "ninety", "nose", "now", "old", "online", "or", "pants", "room", "rule", "same", "seventy", "shirt", "shoes", "sixty", "size", "skirt", "sleep", "smile", "socks", "store", "sweater", "take", "think", "thirty", "too", "wake up", "warm", "wear", "with", "write", "airplane", "age", "beach", "behind", "boat", "by", "car", "city", "cloud", "cool", "cow", "doctor", "drive", "ears", "flowers", "fly", "foot", "feet", "grade", "hair", "hospital", "important", "library", "neighbor", "our", "outside", "park", "people", "picture", "place", "police", "rain", "safe", "sign", "song", "station", "street", "town", "traffic light", "train", "very", "wait", "walk", "work", "your", "afternoon", "April", "August", "beautiful", "change", "cloudy", "date", "December", "every", "fall", "February", "garbage", "garden", "giant", "January", "July", "June", "leaves", "March", "May", "month", "nice", "November", "October", "rainy", "season", "September", "sky", "snow", "snowy", "spring", "summer", "sunny", "weather", "wind", "windy", "winter", "year", "around", "because", "country", "dear", "elephant", "floating", "holiday", "Israel", "market", "photograph", "phone", "travel", "trip", "what", "when", "where", "which", "who", "why", "world"],
    passageStyle: "very simple short paragraph about colors, food, or transport using basic vocabulary only",
    openQuestions: false,
    enemies: [
      {name:"Color Dragon",emoji:"ğŸŒˆ",map:"Rainbow Forest"},
      {name:"Food Monster",emoji:"ğŸ•",map:"Yummy Dungeon"},
    ]
  }
};

const CHARS = [
  {id:"mage",emoji:"ğŸ§™",name:"××œ×“×¨×™×§",cls:"×××’×•×¡ ×§×¨×‘",desc:"×©×•×œ×˜ ×‘×œ×—×©×™× ××¨×§× ×™×™×, ×× ×™×£ ×—×¨×‘ ×•××˜×™×œ ×§×¡××™×.",stats:{×›×•×—:78,×§×¡×:96,××”×™×¨×•×ª:60},c:["#dba84a","#8b4fd0"]},
  {id:"elf",emoji:"ğŸ§â€â™€ï¸",name:"×¡×™×œ××¨×”",cls:"×¨× ×’×³×¨ ×¦×œ×œ×™×",desc:"×§×©×ª×ª ××œ×¤×™×ª ×–×¨×™×–×”, × ×¢×” ×‘×™×Ÿ ×”×¦×œ×œ×™×.",stats:{×›×•×—:68,×§×¡×:60,××”×™×¨×•×ª:98},c:["#50ab7d","#17a890"]},
  {id:"war",emoji:"âš”ï¸",name:"×‘×¨×•×",cls:"×œ×•×¨×“ ×‘×¨×–×œ",desc:"×œ×•×—× ×‘×¨×‘×¨×™ ×©×–×¢××• ×”×¤×š ×œ×›×•×— ×‘×œ×ª×™ × ×™×ª×Ÿ ×œ×¢×¦×™×¨×”.",stats:{×›×•×—:98,×§×¡×:35,××”×™×¨×•×ª:63},c:["#c24510","#ff6933"]},
  {id:"sorx",emoji:"ğŸ”®",name:"×–×¤×™×¨×”",cls:"×›×•×”× ×ª ×”×¨×™×§",desc:"××¤×¨×ª ××ª ××¨×§× ×”××¦×™××•×ª, ×©×•×œ×˜×ª ×‘×›×•×—×•×ª ×”××¤×œ×™×.",stats:{×›×•×—:50,×§×¡×:99,××”×™×¨×•×ª:79},c:["#5c228a","#d850f0"]},
];

/* fallback exercises per profile */
const FALLBACK = {
  yoav: {
    passage: {
      title: "Michael Jordan â€” The Greatest",
      text: "Michael Jordan is playing basketball every day. He is running fast on the court. His team is winning the game. Jordan is shooting the ball into the basket. The fans are cheering loudly. Is Jordan the best player? Yes, he is!"
    },
    mc: [
      {q:"What is Jordan doing every day?",opts:["swimming","playing basketball","reading books","cooking"],ans:"playing basketball",exp:"×”××©×¤×˜ ×”×¨××©×•×Ÿ ××•××¨: 'Michael Jordan is playing basketball every day.'"},
      {q:"Is Jordan's team winning?",opts:["Yes, it is.","No, it isn't.","We don't know.","Maybe."],ans:"Yes, it is.",exp:"×”×˜×§×¡×˜ ××•××¨: 'His team is winning the game.'"},
    ],
    tf: [
      {q:"Jordan is running fast on the court.",ans:true,exp:"× ×›×•×Ÿ! ×”×˜×§×¡×˜ ××•××¨ 'He is running fast on the court.'"},
      {q:"Jordan is swimming in a pool.",ans:false,exp:"×œ× × ×›×•×Ÿ. Jordan ××©×—×§ ×›×“×•×¨×¡×œ, ×œ× ×©×•×—×”."},
    ],
    drag: [
      {words:["Jordan","is","playing","basketball","now"],answer:"Jordan is playing basketball now",exp:"×”×•×•×” ××ª××©×š: Jordan + is + playing + basketball + now"},
      {words:["The","team","is","winning","today"],answer:"The team is winning today",exp:"The team is winning today â€” ×”×¦×•×•×ª ×× ×¦×— ×”×™×•×."},
    ]
  },
  omer: {
    passage: {
      title: "The Dragon's Riddle",
      text: "A dragon is sleeping in a dark cave. The wizard is walking slowly to the cave. He is looking for a magic sword. The dragon opens one eye. 'Who is coming to my cave?' asks the dragon. The wizard is thinking of an answer."
    },
    mc: [
      {q:"Where is the dragon sleeping?",opts:["in a forest","in a cave","in a castle","in a river"],ans:"in a cave",exp:"×”×˜×§×¡×˜ ××•××¨: 'A dragon is sleeping in a dark cave.'"},
      {q:"What is the wizard looking for?",opts:["gold coins","a magic sword","a dragon egg","a map"],ans:"a magic sword",exp:"×”×˜×§×¡×˜ ××•××¨: 'He is looking for a magic sword.'"},
    ],
    tf: [
      {q:"The dragon is sleeping in a castle.",ans:false,exp:"×œ× × ×›×•×Ÿ. ×”×“×¨×§×•×Ÿ ×™×©×Ÿ ×‘××¢×¨×” (cave), ×œ× ×‘×˜×™×¨×”."},
      {q:"The wizard is walking to the cave.",ans:true,exp:"× ×›×•×Ÿ! ×”×˜×§×¡×˜ ××•××¨ 'The wizard is walking slowly to the cave.'"},
    ],
    drag: [
      {words:["The","wizard","is","walking","slowly"],answer:"The wizard is walking slowly",exp:"×”×•×•×” ××ª××©×š: The wizard + is + walking + slowly"},
      {words:["Where","is","the","dragon","sleeping"],answer:"Where is the dragon sleeping",exp:"×©××œ×ª WH: Where + is + the dragon + sleeping?"},
    ]
  },
  noa: {
    passage: {
      title: "Colors and Food",
      text: "I see a red apple. The banana is yellow. The car is blue. I like green vegetables. The bus is big and orange."
    },
    mc: [
      {q:"What color is the apple?",opts:["yellow","blue","red","green"],ans:"red",explanation:"×”×˜×§×¡×˜ ××•××¨: 'I see a red apple.'"},
      {q:"What color is the banana?",opts:["red","yellow","blue","orange"],ans:"yellow",exp:"×”×˜×§×¡×˜ ××•××¨: 'The banana is yellow.'"},
    ],
    tf: [
      {q:"The apple is red.",ans:true,exp:"× ×›×•×Ÿ! The apple is red."},
      {q:"The car is green.",ans:false,exp:"×œ× × ×›×•×Ÿ. The car is blue."},
    ],
    drag: null
  }
};

/* â•â•â•â•â•â•â•â•â•â•â• STATE â•â•â•â•â•â•â•â•â•â•â• */
let G = {
  profile: null, char: null, selChar: null,
  pts: 0, hp: 100, eHp: 100, xp: 0, prog: 0, eIdx: 0,
  blog: "×”××¡×¢ ××ª×—×™×œ...",
  exs: [], exI: 0, exType: null,
  chosen: null, showFb: false, isOk: false,
  dragWords: [], dragPlaced: [],
  apiKey: "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"
};

/* â•â•â•â•â•â•â•â•â•â•â• UTILS â•â•â•â•â•â•â•â•â•â•â• */
let toastTimer;
function showToast(msg,type="gold"){
  const t=document.getElementById("toast");
  t.textContent=msg;t.className=type;t.style.display="block";
  clearTimeout(toastTimer);toastTimer=setTimeout(()=>t.style.display="none",3200);
}
function goTo(sc){
  document.querySelectorAll(".screen").forEach(s=>s.classList.remove("active"));
  document.getElementById("s-"+sc).classList.add("active");
  if(sc==="game")renderGame();
  if(sc==="profiles"){G.profile=null;G.char=null;}
  window.scrollTo(0,0);
}
function saveApiKey(){
  G.apiKey=document.getElementById("api-key-input").value.trim();
  if(G.apiKey){
    localStorage.setItem("eq_api_key",G.apiKey);
    document.getElementById("api-status").textContent="âœ…";
    showToast("âœ… API Key × ×©××¨!","green");
  }
}
function loadApiKey(){
  const saved=localStorage.getItem("eq_api_key");
  if(saved){
    G.apiKey=saved;
    const inp=document.getElementById("api-key-input");
    if(inp){inp.value=saved;document.getElementById("api-status").textContent="âœ… ×©××•×¨";}
  }
}

/* â•â•â•â•â•â•â•â•â•â•â• PROFILE SELECT â•â•â•â•â•â•â•â•â•â•â• */
// Password per profile
const PASSWORDS = {yoav:"yoav123", omer:"omer123", noa:"noa123", admin:"admin999"};

function selectProfile(pid){
  if(pid==="admin"){
    const pw=prompt("×¡×™×¡××ª ×× ×”×œ:");
    if(pw!==PASSWORDS.admin){showToast("×¡×™×¡××” ×©×’×•×™×”","red");return;}
    showAdminPanel();return;
  }
  const pw=prompt(`×¡×™×¡××ª ${PROFILES[pid].name}:`);
  if(pw!==PASSWORDS[pid]){showToast("×¡×™×¡××” ×©×’×•×™×” âŒ","red");return;}
  G.profile = PROFILES[pid];
  G.pts=0;G.hp=100;G.eHp=100;G.xp=0;G.prog=0;G.eIdx=0;
  G.blog=`×‘×¨×•×š ×”×‘× ${G.profile.name}! ×”××¡×¢ ××ª×—×™×œ...`;
  document.getElementById("profile-nav-badge").innerHTML=`
    <span class="profile-badge" style="border-color:${G.profile.color};color:${G.profile.color}">
      ${G.profile.emoji} ${G.profile.name}
    </span>`;
  document.getElementById("s-profiles").classList.remove("active");
  document.getElementById("s-char").classList.add("active");
  renderChars();
}

/* â•â•â•â•â•â•â•â•â•â•â• CHAR SELECT â•â•â•â•â•â•â•â•â•â•â• */
function renderChars(){
  document.getElementById("chars-grid").innerHTML=CHARS.map(c=>`
    <div class="cc ${G.selChar?.id===c.id?'sel':''}" onclick="selChar('${c.id}')">
      ${G.selChar?.id===c.id?'<div class="cc-badge">âœ“ × ×‘×—×¨</div>':''}
      <span class="cc-icon">${c.emoji}</span>
      <div class="cc-name">${c.name}</div><div class="cc-cls">${c.cls}</div>
      <div class="cc-desc">${c.desc}</div>
      <div class="cc-stats">${Object.entries(c.stats).map(([k,v])=>`
        <div class="csr"><span class="csl">${k}</span>
        <div class="csb"><div class="csf" style="width:${v}%;background:linear-gradient(90deg,${c.c[0]},${c.c[1]})"></div></div>
        </div>`).join("")}</div>
    </div>`).join("");
}
function selChar(id){G.selChar=CHARS.find(c=>c.id===id);document.getElementById("start-btn").disabled=false;renderChars();}
function doStart(){
  if(!G.selChar||!G.profile)return;
  G.char=G.selChar;
  goTo("game");
  showToast(`âš”ï¸ ${G.profile.name} + ${G.char.name} â€” ×™××œ×œ×”!`,"green");
}

/* â•â•â•â•â•â•â•â•â•â•â• GAME RENDER â•â•â•â•â•â•â•â•â•â•â• */
function renderGame(){
  if(!G.char||!G.profile)return;
  const enemies=G.profile.enemies;
  const enemy=enemies[G.eIdx%enemies.length];
  document.getElementById("nav-pts").textContent=`â­ ${G.pts}`;
  document.getElementById("nav-av").textContent=G.char.emoji;

  document.getElementById("player-panel").innerHTML=`
    <div class="pnl-t">×”×’×™×‘×•×¨/×” ×©×œ×š</div>
    <div class="hero-c">
      <span class="hero-ic">${G.char.emoji}</span>
      <div class="hero-n">${G.char.name}</div>
      <div class="hero-k">${G.profile.name} Â· ${G.char.cls}</div>
    </div>
    <div class="bw"><div class="bl"><span>HP</span><span>${G.hp}/100</span></div><div class="bt"><div class="bf hp" style="width:${G.hp}%"></div></div></div>
    <div class="bw" style="margin:9px 0 14px"><div class="bl"><span>XP</span><span>${G.xp}/100</span></div><div class="bt"><div class="bf xp" style="width:${G.xp}%"></div></div></div>
    <div class="divL"></div>
    <div class="kv"><span class="kvk">× ×§×•×“×•×ª</span><span class="kvv">ğŸ† ${G.pts}</span></div>
    <div class="kv"><span class="kvk">××¤×”</span><span class="kvv" style="font-size:10px">${enemy.map}</span></div>`;

  const nodes=Array.from({length:10},(_,i)=>{const d=G.prog>=(i+1)*2,n=G.prog>=i*2&&G.prog<(i+1)*2;return `<div class="pnode ${d?'done':n?'now':''}">${d?'âœ“':''}</div>`;}).join("");

  document.getElementById("arena-panel").innerHTML=`
    <div class="arT">âš”ï¸ ×”×–×™×¨×”</div>
    <div class="arM">${enemy.map}</div>
    <div class="fts">
      <div class="ft"><span class="ftic pl">${G.char.emoji}</span><div class="ftnm">${G.char.name}</div>
        <div class="ftbr"><div class="bl"><span>HP</span><span>${G.hp}</span></div><div class="bt"><div class="bf hp" style="width:${G.hp}%"></div></div></div></div>
      <div class="vs">VS</div>
      <div class="ft"><span class="ftic">${enemy.emoji}</span><div class="ftnm">${enemy.name}</div>
        <div class="ftbr"><div class="bl"><span>HP</span><span>${G.eHp}</span></div><div class="bt"><div class="bf nmy" style="width:${G.eHp}%"></div></div></div></div>
    </div>
    <div class="blog"><div class="blogt">${G.blog}</div></div>
    <div class="abtns">
      <button class="bemb" onclick="startPractice('passage')">ğŸ“– ×× ×¡×™×Ÿ + ×©××œ×•×ª</button>
      ${G.profile.openQuestions?`<button class="bteal" onclick="startPractice('drag')">âœï¸ ×”×¨×›×‘ ××©×¤×˜</button>`:''}
    </div>
    <div class="prgsec">
      <div class="prgl"><span>ğŸ—º ×”×ª×§×“××•×ª</span><span>${G.prog} / 20</span></div>
      <div class="bt" style="height:9px"><div class="bf prg" style="width:${(G.prog/20)*100}%"></div></div>
      <div class="prgnodes">${nodes}</div>
    </div>`;

  document.getElementById("quest-panel").innerHTML=`
    <div class="pnl-t">×™×•××Ÿ ××¡×¢</div>
    <div class="kv"><span class="kvk">××•×™×‘</span><span class="kvv" style="font-size:10px">${enemy.name}</span></div>
    <div class="kv"><span class="kvk">× ×•×ª×¨×•</span><span class="kvv">${20-G.prog} ××ª×’×¨×™×</span></div>
    <div class="divL"></div>
    <div class="pnl-t">× ×•×©××™×</div>
    ${G.profile.topics.slice(0,3).map(t=>`<div class="qo"><span class="qo-ck">ğŸ“Œ</span><span class="qo-tx pend" style="direction:ltr">${t}</span></div>`).join("")}
    <div class="divL"></div>
    <div class="pnl-t">×“×§×“×•×§</div>
    ${G.profile.grammar.slice(0,3).map(t=>`<div class="qo"><span class="qo-ck">âœ…</span><span class="qo-tx done" style="direction:ltr;font-size:11px">${t}</span></div>`).join("")}`;
}

/* â•â•â•â•â•â•â•â•â•â•â• PRACTICE â•â•â•â•â•â•â•â•â•â•â• */
async function startPractice(mode){
  G.exI=0;G.chosen=null;G.showFb=false;
  document.getElementById("m-type").textContent = mode==="drag"?"âœï¸ ×”×¨×›×‘ ××©×¤×˜":"ğŸ“– ×× ×¡×™×Ÿ + ×©××œ×•×ª";
  document.getElementById("m-meta").textContent="";
  document.getElementById("overlay").classList.add("open");
  document.getElementById("m-body").innerHTML=`
    <div class="ldg"><span class="ldgic">ğŸ”®</span>
    <div class="ldgT">×”××•×¨×§×œ ××›×™×Ÿ ××ª×’×¨...</div>
    <div class="ldgS">${G.apiKey?"Claude ××™×™×¦×¨ ×ª×•×›×Ÿ ××•×ª×× ××™×©×™×ª":"×˜×•×¢×Ÿ ×ª×•×›×Ÿ ×œ×“×•×’××”..."}</div></div>`;

  if(G.apiKey){
    try{
      const p=G.profile;
      let prompt;
      if(mode==="drag"){
        prompt=`You are an English teacher for a ${p.age}-year-old Hebrew-speaking student at ${p.level} level.
Topics the student enjoys: ${p.topics.join(", ")}.
Grammar topics: ${p.grammar.join(", ")}.

Generate 3 "build a sentence" exercises. Each has 5-6 words that form a complete sentence related to the student's interests.

Return ONLY valid JSON, no markdown:
[{"words":["word1","word2","word3","word4","word5"],"answer":"word1 word2 word3 word4 word5","explanation":"×”×¡×‘×¨ ×§×¦×¨ ×‘×¢×‘×¨×™×ª"}]`;
      } else {
        const qTypes = p.name==="× ×•×¢×”" 
          ? "multiple choice questions AND true/false questions"
          : "multiple choice questions, true/false questions, AND 2 open sentence-building exercises";
        prompt=`You are an English teacher for a ${p.age}-year-old Hebrew-speaking student at ${p.level} level.
Topics the student enjoys: ${p.topics.join(", ")}.
Grammar: ${p.grammar.join(", ")}.

Create ONE engaging passage (6-8 sentences) about one of the student's topics.
Then create questions: ${qTypes}.

Return ONLY valid JSON:
{
  "passage": {"title":"...","text":"..."},
  "mc": [{"q":"...","opts":["A","B","C","D"],"ans":"exact option","exp":"×”×¡×‘×¨ ×‘×¢×‘×¨×™×ª"}],
  "tf": [{"q":"...","ans":true,"exp":"×”×¡×‘×¨ ×‘×¢×‘×¨×™×ª"}],
  "drag": [{"words":["w1","w2","w3","w4","w5"],"answer":"w1 w2 w3 w4 w5","exp":"×”×¡×‘×¨"}]
}
${p.name==="× ×•×¢×”"?'For Noa: very simple vocabulary, short sentences, no drag exercises (set drag to null).':''}`;
      }

      const res=await fetch("https://api.anthropic.com/v1/messages",{
        method:"POST",
        headers:{"Content-Type":"application/json","x-api-key":G.apiKey,"anthropic-version":"2023-06-01","anthropic-dangerous-direct-browser-access":"true"},
        body:JSON.stringify({model:"claude-sonnet-4-20250514",max_tokens:1500,messages:[{role:"user",content:prompt}]})
      });
      const d=await res.json();
      const raw=(d.content?.[0]?.text||"").replace(/```json|```/g,"").trim();
      const parsed=JSON.parse(raw);
      if(mode==="drag"){
        G.exs=parsed; G.exType="drag";
      } else {
        G.exs=parsed; G.exType="passage";
      }
    } catch(e){
      console.log(e);
      useFallback(mode);
    }
  } else {
    await new Promise(r=>setTimeout(r,500));
    useFallback(mode);
  }

  if(G.exType==="passage") renderPassageSession();
  else renderDragExercise();
}

function useFallback(mode){
  const fb=FALLBACK[Object.keys(PROFILES).find(k=>PROFILES[k]===G.profile)];
  if(mode==="drag"){
    G.exs=fb.drag||[];G.exType="drag";
  } else {
    G.exs={passage:fb.passage,mc:fb.mc,tf:fb.tf,drag:fb.drag};G.exType="passage";
  }
}

/* â•â• PASSAGE SESSION â•â• */
let passageQueue=[];
let passageQueueIdx=0;

function renderPassageSession(){
  const data=G.exs;
  // Build queue: show passage first, then mc, then tf, then drag
  passageQueue=[];
  passageQueueIdx=0;
  passageQueue.push({type:"passage",data:data.passage});
  (data.mc||[]).forEach(q=>passageQueue.push({type:"mc",data:q}));
  (data.tf||[]).forEach(q=>passageQueue.push({type:"tf",data:q}));
  if(data.drag) (data.drag||[]).forEach(q=>passageQueue.push({type:"drag",data:q}));
  renderPassageItem();
}

function renderPassageItem(){
  const item=passageQueue[passageQueueIdx];
  if(!item){sessionComplete();return;}
  document.getElementById("m-meta").textContent=`${passageQueueIdx}/${passageQueue.length-1} Â· ${G.prog}/20`;
  G.chosen=null;G.showFb=false;

  if(item.type==="passage"){
    document.getElementById("m-body").innerHTML=`
      <div class="passage">
        <div class="pasT">ğŸ“– ${item.data.title}</div>
        <div class="pasTx">${item.data.text}</div>
      </div>
      <div style="text-align:center">
        <button class="bgold" onclick="nextPassageItem()">×”×ª×—×œ ×œ×¢× ×•×ª ×¢×œ ×©××œ×•×ª â†</button>
      </div>`;
  } else if(item.type==="mc"){
    renderMC(item.data);
  } else if(item.type==="tf"){
    renderTF(item.data);
  } else if(item.type==="drag"){
    renderDragItem(item.data);
  }
}

function nextPassageItem(){
  passageQueueIdx++;
  renderPassageItem();
}

/* MC */
function renderMC(q){
  const opts=(q.opts||[]).map((opt,i)=>{
    let cls="";
    if(G.showFb&&opt===q.ans)cls="cor";
    else if(G.showFb&&opt===G.chosen)cls="wrg";
    return `<button class="opt ${cls}" onclick="answerMC(${i})" ${G.showFb?'disabled':''}>${String.fromCharCode(65+i)}. ${opt}</button>`;
  }).join("");
  const fb=G.showFb?`<div class="fbk ${G.isOk?'cor':'wrg'}">${G.isOk?`âœ… ${q.exp}`:`âŒ ×”×ª×©×•×‘×”: "${q.ans}". ${q.exp}`}</div>
    <button class="bgold" style="width:100%;margin-top:4px" onclick="nextPassageItem()">×”×‘× â†</button>`:"";
  document.getElementById("m-body").innerHTML=`
    <div class="qtype-label">×©××œ×ª ×”×‘× ×”</div>
    <div class="exQ" style="direction:ltr;text-align:left">${q.q}</div>
    <div class="opts">${opts}</div>${fb}`;
}

function answerMC(i){
  if(G.showFb)return;
  const item=passageQueue[passageQueueIdx];
  const q=item.data;
  const opt=q.opts[i];const ok=opt===q.ans;
  G.chosen=opt;G.showFb=true;G.isOk=ok;
  if(ok){G.pts+=25;G.xp=Math.min(100,G.xp+6);G.prog=Math.min(20,G.prog+1);G.eHp=Math.max(0,G.eHp-8);G.blog=`âœ… <span class="g">×ª×©×•×‘×” × ×›×•× ×”!</span> +25 × ×§×•×“×•×ª!`;}
  else{G.hp=Math.max(0,G.hp-5);G.blog=`ğŸ‰ <span class="f">×”××•×™×‘ ×ª×•×§×£!</span> -5 HP`;}
  renderMC(q);
}

/* TF */
function renderTF(q){
  let tCls="",fCls="";
  if(G.showFb){
    if(q.ans===true){tCls="cor";if(G.chosen===false)fCls="wrg";}
    else{fCls="cor";if(G.chosen===true)tCls="wrg";}
  }
  const fb=G.showFb?`<div class="fbk ${G.isOk?'cor':'wrg'}">${G.isOk?`âœ… ${q.exp}`:`âŒ ${q.exp}`}</div>
    <button class="bgold" style="width:100%;margin-top:4px" onclick="nextPassageItem()">×”×‘× â†</button>`:"";
  document.getElementById("m-body").innerHTML=`
    <div class="qtype-label">× ×›×•×Ÿ / ×œ× × ×›×•×Ÿ</div>
    <div class="exQ" style="direction:ltr;text-align:left">${q.q}</div>
    <div class="tf-opts">
      <button class="tf-btn true-btn ${tCls}" onclick="answerTF(true)" ${G.showFb?'disabled':''}>âœ“ True</button>
      <button class="tf-btn false-btn ${fCls}" onclick="answerTF(false)" ${G.showFb?'disabled':''}>âœ— False</button>
    </div>${fb}`;
}

function answerTF(val){
  if(G.showFb)return;
  const q=passageQueue[passageQueueIdx].data;
  const ok=val===q.ans;
  G.chosen=val;G.showFb=true;G.isOk=ok;
  if(ok){G.pts+=20;G.xp=Math.min(100,G.xp+5);G.prog=Math.min(20,G.prog+1);G.eHp=Math.max(0,G.eHp-6);G.blog=`âœ… <span class="g">× ×›×•×Ÿ!</span> +20 × ×§×•×“×•×ª!`;}
  else{G.hp=Math.max(0,G.hp-5);G.blog=`ğŸ‰ <span class="f">×œ× × ×›×•×Ÿ!</span> -5 HP`;}
  renderTF(q);
}

/* DRAG â€” item within passage */
function renderDragItem(q){
  const shuffled=[...q.words].sort(()=>Math.random()-.5);
  G.dragWords=shuffled;G.dragPlaced=[];
  renderDragUI(q,shuffled);
}

/* DRAG â€” standalone session */
function renderDragExercise(){
  if(!G.exs||G.exs.length===0){closeModal();return;}
  G.exI=0;
  const q=G.exs[G.exI];
  const shuffled=[...q.words].sort(()=>Math.random()-.5);
  G.dragWords=shuffled;G.dragPlaced=[];
  document.getElementById("m-meta").textContent=`××©×¤×˜ ${G.exI+1} ××ª×•×š ${G.exs.length}`;
  renderDragUI(q,shuffled);
}

function renderDragUI(q,shuffled){
  document.getElementById("m-body").innerHTML=`
    <div class="qtype-label">×”×¨×›×‘/×™ ××©×¤×˜ â€” ×’×¨×•×¨/×™ ××™×œ×™× ×œ×ª×™×‘×”</div>
    <div class="drag-sentence-label">×”××©×¤×˜ ×©×œ×š:</div>
    <div class="drag-sentence" id="drag-target"
      ondragover="event.preventDefault();this.classList.add('drag-over')"
      ondragleave="this.classList.remove('drag-over')"
      ondrop="dropWord(event)">
      <span id="drag-placeholder" style="color:var(--textD);font-size:13px;font-style:italic">×’×¨×•×¨/×™ ××™×œ×™× ×œ×›××Ÿ...</span>
    </div>
    <div class="drag-sentence-label">××—×¡×Ÿ ××™×œ×™×:</div>
    <div class="word-bank" id="word-bank"
      ondragover="event.preventDefault()"
      ondrop="returnWord(event)">
      ${shuffled.map((w,i)=>`<div class="word-chip" draggable="true" id="wc-${i}"
        ondragstart="dragStart(event,${i})"
        ondragend="dragEnd(event)">${w}</div>`).join("")}
    </div>
    <div class="drag-check">
      <button class="bgold" onclick="checkDrag('${q.answer}','${(q.exp||q.explanation||'').replace(/'/g,"\\'")}')">×‘×“×•×§ âœ“</button>
      <button onclick="resetDrag()" style="margin-right:10px;padding:10px 18px;background:transparent;border:1px solid rgba(219,168,74,.3);border-radius:6px;color:var(--textD);cursor:pointer;font-family:var(--S);font-size:12px">× ×§×”</button>
    </div>
    <div id="drag-fb"></div>`;
}

let dragIdx=null;
function dragStart(e,i){dragIdx=i;e.target.classList.add('dragging');e.dataTransfer.setData('text/plain',i);}
function dragEnd(e){e.target.classList.remove('dragging');}

function dropWord(e){
  e.preventDefault();
  const target=document.getElementById("drag-target");
  target.classList.remove('drag-over');
  const i=parseInt(e.dataTransfer.getData('text/plain'));
  const chip=document.getElementById("wc-"+i);
  if(!chip)return;
  const placeholder=document.getElementById("drag-placeholder");
  if(placeholder)placeholder.remove();
  chip.classList.add('placed');
  chip.setAttribute('ondragstart',`dragStart(event,${i})`);
  target.appendChild(chip);
  G.dragPlaced.push(i);
}

function returnWord(e){
  e.preventDefault();
  const i=parseInt(e.dataTransfer.getData('text/plain'));
  const chip=document.getElementById("wc-"+i);
  if(!chip)return;
  chip.classList.remove('placed');
  document.getElementById("word-bank").appendChild(chip);
  G.dragPlaced=G.dragPlaced.filter(x=>x!==i);
  if(document.getElementById("drag-target").children.length===0){
    document.getElementById("drag-target").innerHTML='<span id="drag-placeholder" style="color:var(--textD);font-size:13px;font-style:italic">×’×¨×•×¨/×™ ××™×œ×™× ×œ×›××Ÿ...</span>';
  }
}

function resetDrag(){
  const bank=document.getElementById("word-bank");
  const target=document.getElementById("drag-target");
  [...target.querySelectorAll('.word-chip')].forEach(c=>{c.classList.remove('placed');bank.appendChild(c);});
  target.innerHTML='<span id="drag-placeholder" style="color:var(--textD);font-size:13px;font-style:italic">×’×¨×•×¨/×™ ××™×œ×™× ×œ×›××Ÿ...</span>';
  G.dragPlaced=[];
}

function checkDrag(answer,exp){
  const target=document.getElementById("drag-target");
  const placed=[...target.querySelectorAll('.word-chip')].map(c=>c.textContent.trim()).join(" ");
  const ok=placed.toLowerCase()===answer.toLowerCase();
  const fb=document.getElementById("drag-fb");
  fb.innerHTML=`<div class="fbk ${ok?'cor':'wrg'}" style="margin-top:14px">
    ${ok?`âœ… ××¦×•×™×Ÿ! "${answer}" â€” ${exp}`:`âŒ ×”× ×¡×” ×©×•×‘. ×”×¡×“×¨ ×”× ×›×•×Ÿ: "${answer}". ${exp}`}
  </div>`;
  if(ok){
    G.pts+=35;G.xp=Math.min(100,G.xp+10);G.prog=Math.min(20,G.prog+1);G.eHp=Math.max(0,G.eHp-10);
    G.blog=`âœ… <span class="g">××¦×•×™×Ÿ!</span> +35 × ×§×•×“×•×ª!`;
    fb.innerHTML+=`<button class="bgold" style="width:100%;margin-top:10px" onclick="nextDragOrClose()">×”×‘× â†</button>`;
  } else {
    G.hp=Math.max(0,G.hp-5);
    G.blog=`ğŸ‰ <span class="f">×œ× ×‘×“×™×•×§...</span> × ×¡×”/×™ ×©×•×‘!`;
    fb.innerHTML+=`<button onclick="resetDrag()" style="margin-top:10px;width:100%;padding:12px;background:rgba(219,168,74,.08);border:1px solid rgba(219,168,74,.3);border-radius:6px;color:var(--gold);cursor:pointer;font-family:var(--T);font-size:13px">× ×¡×” ×©×•×‘ ğŸ”„</button>`;
  }
}

function nextDragOrClose(){
  if(G.exType==="passage"){
    nextPassageItem();
  } else {
    G.exI++;
    if(G.exI>=G.exs.length){sessionComplete();}
    else{
      const q=G.exs[G.exI];
      const shuffled=[...q.words].sort(()=>Math.random()-.5);
      G.dragWords=shuffled;G.dragPlaced=[];
      document.getElementById("m-meta").textContent=`××©×¤×˜ ${G.exI+1} ××ª×•×š ${G.exs.length}`;
      renderDragUI(q,shuffled);
    }
  }
}

function sessionComplete(){
  G.pts+=100;
  showToast(`ğŸ† ${G.profile.name} ×¡×™×™×/×”! +100 ×‘×•× ×•×¡!`,"green");
  closeModal();
  renderGame();
}

function closeModal(){document.getElementById("overlay").classList.remove("open");renderGame();}

function impersonate(pid){
  closeModal();
  G.profile = PROFILES[pid];
  G.pts=0;G.hp=100;G.eHp=100;G.xp=0;G.prog=0;G.eIdx=0;
  G.blog=`×× ×”×œ ××ª×—×–×” ×›-${G.profile.name}`;
  G.selChar=null;G.char=null;
  // Show impersonation banner
  document.getElementById("profile-nav-badge").innerHTML=`
    <span class="profile-badge" style="border-color:#22d9bc;color:#22d9bc;background:rgba(23,168,144,.1)">
      ğŸ‘ ××ª×—×–×”: ${G.profile.emoji} ${G.profile.name}
    </span>
    <button onclick="stopImpersonate()" style="margin-right:8px;padding:4px 10px;background:rgba(194,69,16,.15);border:1px solid rgba(194,69,16,.4);border-radius:4px;color:var(--ember2);cursor:pointer;font-family:var(--S);font-size:10px">×¢×¦×•×¨</button>`;
  document.querySelectorAll(".screen").forEach(s=>s.classList.remove("active"));
  document.getElementById("s-char").classList.add("active");
  renderChars();
  showToast(\`ğŸ‘ ××ª×—×–×” ×›-\${G.profile.name}\`,"green");
}

function stopImpersonate(){
  G.profile=null;G.char=null;G.selChar=null;
  goTo("profiles");
  showToast("×—×–×¨×ª ×œ××¡×š ×”× ×™×”×•×œ");
}

function showAdminPanel(){
  document.getElementById("overlay").classList.add("open");
  document.getElementById("m-type").textContent="âš™ï¸ ×××©×§ × ×™×”×•×œ";
  document.getElementById("m-meta").textContent="×¡×˜×˜×•×¡ ×™×œ×“×™×";
  document.getElementById("m-body").innerHTML=`
    <div style="margin-bottom:20px">
      <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-bottom:20px">
        ${Object.entries(PROFILES).map(([k,p])=>`
          <div style="background:rgba(0,0,0,.3);border:1px solid rgba(219,168,74,.15);border-radius:10px;padding:16px;text-align:center">
            <div style="font-size:32px;margin-bottom:6px">${p.emoji}</div>
            <div style="font-family:var(--T);color:var(--gold);font-size:14px;margin-bottom:4px">${p.name}</div>
            <div style="font-family:var(--S);font-size:10px;color:var(--textD);letter-spacing:1px;margin-bottom:10px">${p.level}</div>
            <button onclick="impersonate('${k}')" 
              style="width:100%;padding:7px;background:rgba(219,168,74,.1);border:1px solid rgba(219,168,74,.3);border-radius:5px;color:var(--gold);cursor:pointer;font-family:var(--S);font-size:11px;letter-spacing:1px">
              ğŸ‘ ×›× ×¡ ×›-${p.name}
            </button>
          </div>`).join("")}
      </div>
      <div style="background:rgba(23,168,144,.06);border:1px solid rgba(23,168,144,.18);border-radius:10px;padding:16px;font-family:var(--S);font-size:12px;color:var(--tealL);line-height:2">
        ğŸ”‘ <strong>×¡×™×¡×××•×ª ×™×œ×“×™×:</strong><br>
        ×™×•××‘: <strong>yoav123</strong> &nbsp;|&nbsp; ×¢×•××¨: <strong>omer123</strong> &nbsp;|&nbsp; × ×•×¢×”: <strong>noa123</strong><br>
        <br>
        ğŸ“‹ <strong>×”× ×—×™×•×ª:</strong><br>
        â€¢ ×›×œ ×™×œ×“ × ×›× ×¡ ×¢× ×”×¡×™×¡××” ×©×œ×• ×‘×œ×‘×“<br>
        â€¢ ×©×œ×—×™ ×œ×›×œ ×™×œ×“ ××ª ×”×§×™×©×•×¨ + ×”×¡×™×¡××” ×©×œ×•<br>
        â€¢ × ×™×ª×Ÿ ×œ×©× ×•×ª ×¡×™×¡×××•×ª ×‘×§×•×“ (×©×•×¨×ª PASSWORDS)
      </div>
      <div style="margin-top:16px;background:rgba(219,168,74,.06);border:1px solid rgba(219,168,74,.15);border-radius:10px;padding:16px;font-family:var(--S);font-size:12px;color:var(--gold);line-height:2">
        ğŸ”— <strong>×”×§×™×©×•×¨ ×œ×©×™×ª×•×£:</strong><br>
        <span style="direction:ltr;display:block;font-size:11px;color:var(--textD)">https://meravash.github.io/englishquest</span>
        <button onclick="navigator.clipboard.writeText('https://meravash.github.io/englishquest').then(()=>showToast('âœ… ×”×•×¢×ª×§!','green'))" 
          style="margin-top:8px;padding:6px 16px;background:rgba(219,168,74,.12);border:1px solid rgba(219,168,74,.3);border-radius:5px;color:var(--gold);cursor:pointer;font-family:var(--S);font-size:11px">
          ğŸ“‹ ×”×¢×ª×§ ×§×™×©×•×¨
        </button>
      </div>
    </div>`;
}
</script>
</body>
</html>
